<script>
  async function loadValine() {
    if (typeof Valine === "function") {
      var valine = new Valine({
        el: '.valine',
        appId: '<%= theme.valine.appId %>',
        appKey: '<%= theme.valine.appKey %>',
        placeholder: '<%= theme.valine.placeholder %>',
        visitor: <%= theme.valine.visitor %>,
        verify: <%= theme.valine.verify %>,
        recordIP: <%= theme.valine.recordIP %>,
        requiredFields: '<%= theme.valine.requiredFields %>'.split(','),
        path: window.location.pathname,
      });
    }
    else {
      loadScript("//cdn1.lncld.net/static/js/3.0.4/av-min.js", ()=>{loadScript('<%- theme.cdn.valine.js %>', loadValine);})
    }
  };
</script>
<script class='pjax-reload'>
  loadValine();
</script>